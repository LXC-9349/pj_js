(window.webpackJsonp=window.webpackJsonp||[]).push([["app~e8bd7f01"],{"0334":function(e,t){e.exports=videojs},"164e":function(e,t){e.exports=echarts},1715:function(e,t){e.exports=wx},"1af2":function(e,t){e.exports=NProgress},4584:function(e,t){e.exports=CountUp},4692:function(e,t){e.exports=Stomp},"4e72":function(e,t){e.exports=antd},5880:function(e,t){e.exports=Vuex},"5f72":function(e,t){e.exports=ELEMENT},"60bb":function(e,t){e.exports=_},6389:function(e,t){e.exports=VueRouter},"79fd":function(e,t){e.exports=QRCode},"8bbf":function(e,t){e.exports=Vue},"8d1a":function(e,t,a){"use strict";a.r(t),a("a573");var l=a("acfd"),r=a("312a"),n=a("7fb7"),o=a("1a80"),i=a("7270"),s=a("12f6"),u=a("df2b"),c=a("4d8a"),d=a("1a18"),p=a("cb3a"),m=a("061b"),h={name:"vdCollect",components:{Analysis:a("0d69").default,IFrame:m.a,NetInfoData:p.default,PlayDialog:i.a,VdInfo:o.default,Mix:n.default,TtUserInfo:r.default,WorkerId:()=>Promise.resolve().then(a.bind(null,"b02a"))},data:()=>({tableHeight:document.documentElement.scrollHeight-245+"px",playDialog:{open:!1,inputUrl:null,url:null},loading:!0,info:{open:!1,title:"合集详情",url:"",type:""},ids:[],single:!0,multiple:!0,showSearch:!0,daterangeCreateTime:[],total:0,collectList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,name:null,authorId:null,authorUser:null,remark:null,url:null,type:null,channel:null,vdCount:null,userId:null,tag:null,parentId:null},form:{},rules:{},webInfo:{open:!1,title:"详情",url:"",data:[],type:""},resolvDig:{open:!1,title:"详情",url:""},tt_local:!1}),created(){this.getList(),Object(c.g)().then(e=>{this.tt_local=!0,this.$cache.local.set("tt_local","true")}).catch(e=>{this.$cache.local.set("tt_local","false")}).finally(()=>{})},methods:{notNull:u.L,videoUri:s.g,playClose(){this.playDialog.url=null},webInfoOpen(e){this.webInfo.url=e.url,Object(d.f)(this.tt_local,this.webInfo.url).then(e=>{this.webInfoData(e)})},resolvOpen(e){this.resolvDig.url=e.url,this.resolvDig.open=!0},async webInfoData(e){let t=this.webInfo.url.substring(0,this.webInfo.url.indexOf("?"));const a=e.list.map(e=>Object(d.b)(e,t));this.webInfo.data=await Promise.all(a),this.webInfo.open=!0},openInfo(e,t){this.info.open=!0,this.info.type=e,this.info.url=t},execQueryParam(){this.queryParams=this.addDateRange(this.queryParams,this.daterangeCreateTime,"startTime")},getList(){this.loading=!0,this.execQueryParam(),Object(l.f)(this.queryParams).then(e=>{this.collectList=e.records,this.total=e.total,this.loading=!1})},cancel(){this.open=!1,this.reset()},reset(){this.form={id:null,name:null,authorId:null,authorUser:null,remark:null,url:null,type:"m",channel:null,vdCount:null,userId:null,tag:null,parentId:null},this.resetForm("form")},handleQuery(){this.queryParams.pageNum=1,this.getList()},resetQuery(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange(e){this.ids=e.map(e=>e.id),this.single=1!==e.length,this.multiple=!e.length},handleAdd(){this.reset(),this.open=!0,this.title="添加短视频收藏信息"},handleUpdate(e){this.reset();const t=e.id||this.ids;Object(l.e)(t).then(e=>{this.form=e,this.open=!0,this.title="修改短视频收藏信息"})},submitForm(){this.$refs.form.validate(e=>{e&&(null!=this.form.id?Object(l.g)(this.form).then(e=>{this.$modal.msgSuccess("修改成功"),this.open=!1,this.getList()}):Object(l.a)(this.form).then(e=>{this.$modal.msgSuccess("新增成功"),this.open=!1,this.getList()}))})},handleDelete(e){const t=e.id||this.ids;this.$modal.confirm("是否确认删除短视频收藏信息？").then((function(){return Object(l.b)(t)})).then(()=>{this.getList(),this.$modal.msgSuccess("删除成功")}).catch(()=>{})},handleExport(){this.$websocket.isConnected?(this.execQueryParam(),Object(l.c)(this.queryParams).then(()=>{this.$modal.msgSuccess("导出中,请稍后...")})):this.$modal.msgWarning("本地未连接服务器,打印失败")},handlePrint(){this.$websocket.isConnected?(this.execQueryParam(),Object(l.d)(this.queryParams).then(()=>{this.$modal.msgSuccess("打印中,请稍后...")})):this.$modal.msgWarning("本地未连接服务器,打印失败")}}},f=a("2877"),g=Object(f.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0,"label-width":"68px"},nativeOn:{submit:function(t){return t.preventDefault(),e.handleQuery.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"类型",prop:"type"}},[t("el-radio-group",{on:{change:e.handleQuery},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}},[t("el-radio-button",{attrs:{label:"m"}},[e._v("合集")]),t("el-radio-button",{attrs:{label:"u"}},[e._v("用户")]),t("el-radio-button",{attrs:{label:"v"}},[e._v("视频")])],1)],1),t("el-form-item",{attrs:{label:"收藏名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入作者名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.name,callback:function(t){e.$set(e.queryParams,"name",t)},expression:"queryParams.name"}})],1),t("el-form-item",{attrs:{label:"作者名称",prop:"authorUser"}},[t("el-input",{attrs:{placeholder:"请输入作者名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.authorUser,callback:function(t){e.$set(e.queryParams,"authorUser",t)},expression:"queryParams.authorUser"}})],1),t("el-form-item",{attrs:{label:"渠道",prop:"channel"}},[t("el-input",{attrs:{placeholder:"请输入渠道",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.channel,callback:function(t){e.$set(e.queryParams,"channel",t)},expression:"queryParams.channel"}})],1),e.$auth.hasPermi(["user:search"])?t("el-form-item",{attrs:{label:"用户ID",prop:"userId"}},[t("worker-id",{model:{value:e.queryParams.userId,callback:function(t){e.$set(e.queryParams,"userId",t)},expression:"queryParams.userId"}})],1):e._e(),t("el-form-item",{attrs:{label:"标签",prop:"tag"}},[t("el-input",{attrs:{placeholder:"请输入标签",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.tag,callback:function(t){e.$set(e.queryParams,"tag",t)},expression:"queryParams.tag"}})],1),t("el-form-item",{attrs:{label:"上级ID",prop:"parentId"}},[t("el-input",{attrs:{placeholder:"请输入上级ID",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.parentId,callback:function(t){e.$set(e.queryParams,"parentId",t)},expression:"queryParams.parentId"}})],1),t("el-form-item",{attrs:{label:"更新时间",prop:"createTime"}},[t("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small","value-format":"yyyy-MM-dd",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.handleQuery},model:{value:e.daterangeCreateTime,callback:function(t){e.daterangeCreateTime=t},expression:"daterangeCreateTime"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),t("el-row",{staticClass:"mb8",attrs:{gutter:10}},[t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"has-auth",rawName:"v-has-auth",value:["file:dy"],expression:"['file:dy']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")])],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"has-auth",rawName:"v-has-auth",value:["file:dy"],expression:"['file:dy']"}],attrs:{type:"success",plain:"",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改 ")])],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"has-auth",rawName:"v-has-auth",value:["file:dy"],expression:"['file:dy']"}],attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除 ")])],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"has-auth",rawName:"v-has-auth",value:["file:dy"],expression:"['file:dy']"}],attrs:{type:"warning",plain:"",icon:"el-icon-download",size:"mini"},on:{click:e.handleExport}},[e._v("导出 ")])],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{directives:[{name:"has-auth",rawName:"v-has-auth",value:["file:dy"],expression:"['file:dy']"}],attrs:{type:"success",plain:"",icon:"el-icon-reading",size:"mini"},on:{click:e.handlePrint}},[e._v("打印 ")])],1),t("el-col",{attrs:{span:1.5}},[t("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-video-play",size:"mini"},on:{click:function(t){e.playDialog.open=!0}}},[e._v("在线解析 ")])],1),t("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"max-height":e.tableHeight,data:e.collectList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t("el-table-column",{attrs:{label:"标签",align:"center",prop:"tag"}}),t("el-table-column",{attrs:{label:"收藏名称",align:"center",prop:"name",width:"200","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"静态封面",align:"center",prop:"img"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("pic-view",{attrs:{src:e.row.img,stylecss:"height: 100px;object-fit: contain;width: 100px;"}})]}}])}),t("el-table-column",{attrs:{label:"作者名称",align:"center",width:"200","show-overflow-tooltip":"",prop:"authorUser"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.authorUser)+" "),"dy"===a.row.channel?t("tt-user-info",{attrs:{src:a.row.authorId}}):e._e()]}}])}),t("el-table-column",{attrs:{label:"描述",align:"center",width:"200","show-overflow-tooltip":"",prop:"remark"}}),t("el-table-column",{attrs:{label:"类型",align:"center",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(a){return["m"===a.row.type?t("el-tag",{attrs:{type:"danger"}},[e._v("合集")]):e._e(),"u"===a.row.type?t("el-tag",{attrs:{type:"warning"}},[e._v("用户")]):e._e(),"v"===a.row.type?t("el-tag",{attrs:{type:"success"}},[e._v("视频")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"动态封面",align:"center",prop:"ydImg"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("pic-view",{attrs:{src:e.row.ydImg,stylecss:"height: 100px;object-fit: contain;width: 100px;"}})]}}])}),t("el-table-column",{attrs:{label:"渠道",align:"center",prop:"channel"}}),t("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"90"}}),t("el-table-column",{attrs:{label:"包含视频数量",align:"center",prop:"vdCount"}}),t("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"updateTime",width:"90"}}),t("el-table-column",{attrs:{label:"所属用户",align:"center",prop:"userId"}}),t("el-table-column",{attrs:{label:"上级ID",align:"center",prop:"parentId"}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(a){return["m"===a.row.type?t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-s-data"},on:{click:function(t){return e.openInfo(a.row.type,a.row.url)}}},[e._v("合集详情")]):e._e(),"u"===a.row.type?t("tt-user-info",{attrs:{"is-collect":!0,src:a.row.url}}):e._e(),"v"===a.row.type&&"web"===a.row.channel?t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-info"},on:{click:function(t){return e.webInfoOpen(a.row)}}},[e._v("详情 ")]):e._e(),"resolv"===a.row.channel?t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-info"},on:{click:function(t){return e.resolvOpen(a.row)}}},[e._v("详情 ")]):e._e(),"v"===a.row.type&&"dy"===a.row.channel?t("vd-info",{attrs:{"is-collect":!0,src:a.row.url}}):e._e(),a.row.uri&&"v"===a.row.type?t("play-dialog",{attrs:{iframe:!1,fm:a.row.img,url:e.videoUri(a.row.uri)}}):e._e(),t("el-button",{directives:[{name:"has-auth",rawName:"v-has-auth",value:["file:dy"],expression:"['file:dy']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleUpdate(a.row)}}},[e._v("编辑 ")]),t("el-button",{directives:[{name:"has-auth",rawName:"v-has-auth",value:["file:dy"],expression:"['file:dy']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v("删除 ")])]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),t("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"},{name:"dialog-drag-width",rawName:"v-dialog-drag-width"},{name:"dialog-drag-height",rawName:"v-dialog-drag-height"}],attrs:{"close-on-click-modal":!1,title:e.title,visible:e.open,width:"85%","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"所属类型",prop:"type"}},[t("el-radio-group",{attrs:{disabled:e.notNull(e.form.id)},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("el-radio-button",{attrs:{label:"m"}},[e._v("合集")]),t("el-radio-button",{attrs:{label:"u"}},[e._v("用户")]),t("el-radio-button",{attrs:{label:"v"}},[e._v("视频")])],1)],1),t("el-form-item",{attrs:{label:"标签",prop:"tag"}},[t("el-input",{attrs:{placeholder:"请输入标签"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}})],1),t("el-form-item",{attrs:{label:"收藏名称",prop:"name"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"remark"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),t("el-form-item",{attrs:{label:"作者名称",prop:"authorUser"}},[t("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.authorUser,callback:function(t){e.$set(e.form,"authorUser",t)},expression:"form.authorUser"}})],1),t("el-form-item",{attrs:{label:"链接",prop:"url"}},[t("el-input",{attrs:{type:"textarea",disabled:e.notNull(e.form.id),placeholder:"请输入内容"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),t("el-form-item",{attrs:{label:"渠道",prop:"channel"}},[t("el-input",{attrs:{readonly:"",placeholder:"请输入渠道"},model:{value:e.form.channel,callback:function(t){e.$set(e.form,"channel",t)},expression:"form.channel"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),t("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),t("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"},{name:"dialog-drag-width",rawName:"v-dialog-drag-width"},{name:"dialog-drag-height",rawName:"v-dialog-drag-height"}],attrs:{"close-on-click-modal":!1,title:e.info.title,visible:e.info.open,width:"85%","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.info,"open",t)}}},[e.info.open&&"m"===e.info.type?t("mix",{attrs:{url:e.info.url,"is-collect":!0}}):e._e()],1),t("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"},{name:"dialog-drag-width",rawName:"v-dialog-drag-width"},{name:"dialog-drag-height",rawName:"v-dialog-drag-height"}],attrs:{"close-on-click-modal":!1,title:e.webInfo.title,visible:e.webInfo.open,width:"85%","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.webInfo,"open",t)}}},[e.webInfo.data?t("net-info-data",{directives:[{name:"loading",rawName:"v-loading",value:!e.webInfo.open,expression:"!webInfo.open"}],attrs:{collect:!0,"data-list":e.webInfo.data}}):e._e()],1),t("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"},{name:"dialog-drag-width",rawName:"v-dialog-drag-width"},{name:"dialog-drag-height",rawName:"v-dialog-drag-height"}],attrs:{"close-on-click-modal":!1,title:e.resolvDig.title,visible:e.resolvDig.open,width:"85%","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.resolvDig,"open",t)}}},[e.resolvDig.url?t("analysis",{attrs:{durl:e.resolvDig.url,collect:!0}}):e._e()],1),t("el-dialog",{directives:[{name:"dialog-drag",rawName:"v-dialog-drag"},{name:"dialog-drag-width",rawName:"v-dialog-drag-width"},{name:"dialog-drag-height",rawName:"v-dialog-drag-height"}],attrs:{"close-on-click-modal":!1,title:"输入地址播放",visible:e.playDialog.open,width:"88%","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.playDialog,"open",t)},closed:e.playClose}},[e.playDialog.url?t("i-frame",{attrs:{src:e.playDialog.url,divHeight:500}}):e._e(),t("el-input",{attrs:{placeholder:"输入地址进行播放",clearable:""},model:{value:e.playDialog.inputUrl,callback:function(t){e.$set(e.playDialog,"inputUrl",t)},expression:"playDialog.inputUrl"}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.playDialog.url="https://www.pouyun.com/?url="+encodeURIComponent(e.playDialog.inputUrl)}}},[e._v("确 定")]),t("el-button",{on:{click:function(t){e.playDialog.open=!1}}},[e._v("取 消")])],1)],1)],1)}),[],!1,null,null,null);t.default=g.exports},9588:function(e,t){e.exports=saveAs},a2c5:function(e,t){e.exports=CryptoJS},a352:function(e,t){e.exports=Sortable},b0c2:function(e,t){e.exports=ClipboardJS},c32d:function(e,t){e.exports=moment},c5e1:function(e,t){e.exports=$},cebe:function(e,t){e.exports=axios},cf96:function(e,t){e.exports=SockJS},d745:function(e,t){e.exports=screenfull},f4e8:function(e,t){e.exports=hljs}},[[1,"runtime","app~1336c15f","app~14518575","app~096f4147","app~06837ae4","app~2e500a97","app~2a42e354","app~03c2e492","app~1f20a385","app~4e6b2cf8"]]]);